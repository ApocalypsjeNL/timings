(function($) {"use strict";function expandTimings(t,a){this.show(),a.unbind("click"),a.html("[-]"),a.bind("click",collapseTimings.bind(this,t,a))}function collapseTimings(t,a){this.hide(),a.unbind("click"),a.html("[+]"),a.bind("click",expandTimings.bind(this,t,a))}function getQueryParam(t,a){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search);return null===i?a:decodeURIComponent(i[1].replace(/\+/g," "))}function showInfo(t){$("#info-"+$(t).attr("info")).dialog({width:"80%",modal:!0})}$(document).ready(function(){function t(){d&&clearTimeout(d),d=setTimeout(function(){var t=getQueryParam("all");t=t?"&all="+t:"",window.location="?id="+n.id+"&start="+l+"&end="+r+t},1e3)}function a(){var t=new Date(1e3*l),a=new Date(1e3*r);$("#start-time").text(t.toLocaleString()),$("#end-time").text(a.toLocaleString())}function e(t){return new Chart($(t).get(0).getContext("2d"))}function i(t,a){void 0==a&&(a=1);var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?"rgba("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+","+a+")":t}var n=window.timingsData||{ranges:[],start:1,end:1,maxTime:1},o=n.ranges,l=n.start,r=n.end;$("#time-selector").slider({min:0,max:o.length-1,values:[o.indexOf(l),o.indexOf(r)],range:!0,slide:function(e,i){l=o[i.values[0]],r=o[i.values[1]],a(),t()}}),a();var s=[],c={Entities:1e4,"Tile Entities":25e3,Chunks:3e3,Players:100,TPS:20};n.stamps.forEach(function(t){var a=new Date(1e3*t);s.push(a.toLocaleString())}),n.tpsData.forEach(function(t,a){n.tpsData[a]=t/c.TPS*n.maxTime}),n.plaData.forEach(function(t,a){n.plaData[a]=t/c.Players*n.maxTime}),n.tentData.forEach(function(t,a){n.tentData[a]=t/c["Tile Entities"]*n.maxTime}),n.entData.forEach(function(t,a){n.entData[a]=t/c.Entities*n.maxTime}),n.chunkData.forEach(function(t,a){n.chunkData[a]=t/c.Chunks*n.maxTime}),e("#tps-graph").Line({labels:s,datasets:[{data:[n.maxTime],PointDotRadius:0,pointStrokeWidth:0},{label:"TPS",fillColor:i("#ABFFA8",.8),strokeColor:"rgba(16,109,47,.7)",pointColor:"rgba(16,109,47,.7)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:n.tpsData},{label:"LAG",fillColor:i("ff8e01",.8),strokeColor:"rgba(255,60,60,1)",pointColor:"rgba(255,60,60,1)",pointStrokeColor:"#ff5533",pointHighlightFill:"#ff5533",pointHighlightStroke:"rgba(151,187,205,1)",data:n.lagData},{label:"Players",fillColor:"rgba(0,0,0,0)",pointColor:"#4F80FF",pointStrokeColor:"#DBF76A",data:n.plaData},{label:"Tile Entities",fillColor:"rgba(0,0,0,0)",pointColor:"#DBF76A",pointStrokeColor:"#DBF76A",data:n.tentData},{label:"Entities",fillColor:"rgba(0,0,0,0)",pointColor:"#84E2FF",pointStrokeColor:"#84E2FF",data:n.entData},{label:"Chunks",fillColor:"rgba(0,0,0,0)",pointColor:"#9324B5",pointStrokeColor:"#9324B5",data:n.chunkData}]},{animation:!1,legendTemplate:"",showScale:!1,pointHitDetectionRadius:2,responsive:!0,maintainAspectRatio:!1,multiTooltipTemplate:function(t){return"LAG"==t.datasetLabel?Math.round(t.value/n.maxTime*100)+"% TPS Loss":Math.round(t.value/n.maxTime*c[t.datasetLabel]*100)/100+" "+t.datasetLabel}});var d=0;$("#time-selector").click(function(){d&&(clearTimeout(d),d=0)}),$(".button").button(),setTimeout(function(){var t=$(".adsbygoogle").length;if(t){$('<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">').appendTo("body");for(var a=0;t>a;a++)(window.adsbygoogle=window.adsbygoogle||[]).push({})}},1e3),$(".indent").mouseenter(function(){var t,a=this.className.split(/\s+/);for(var e in a)if(a[e].startsWith("full-depth")){t=a[e];break}var i=parseInt(t.replace("full-depth","")),n=$("#depth-view");n.html("Depth: "+i);var o={height:n.css("height"),width:n.css("width"),display:"block"};$("#depth-view-bg").css(o)}).mouseleave(function(){$("#depth-view").html(""),$("#depth-view-bg").css("display","none")});var f=$(".full-timing-row .children");f.each(function(){var t=$(this),a=t.parent();a.find(" > .name").first().before("<div class='expand-control'>[+]</div> ");var e=a.find(" > .expand-control").first();e.bind("click",expandTimings.bind(t,a,e))})});
})(jQuery);